{% extends "base.html" %}

{% block additional_styles %}
  <link rel="stylesheet" href="/static/dist/ol.v6.4.3-dist/ol.css" type="text/css">
{% endblock %}


{% block content %}
  <body>
    <div class="map-header">
      <h3 class="title">
        {% if title %}
          {{ title }}
        {% else %}
          Untitled geofencing map
        {% endif %}
      </h3>
      <h6>
        {{ description }}
      </h6>
    </div>
    {{ map_data|json_script:"map_data" }}
    <div id="map" class="map"></div>

    <div class="modal fade" id="geofenceAlertModal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" >Geo Alert</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div id="fence_enter_message">
              <span>{{ map_data.fence_enter_message }}</span>
            </div>
            <div id="fence_leave_message">
              <span>{{ map_data.fence_leave_message }}</span>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block additional_scripts %}
  <script src="/static/dist/ol.v6.4.3-dist/ol.js"></script>
  <script type="text/javascript" src="/static/js/map_view.js"></script>
{% endblock %}